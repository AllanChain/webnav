"use strict";(self["webpackChunkwebnav"]=self["webpackChunkwebnav"]||[]).push([[922],{5321:function(e,t,r){r.d(t,{qW:function(){return a}});var n=r(2866),o=r(512);const a=(0,o.Ji)("v-toolbar__title"),i=(0,o.Ji)("v-toolbar__items");n.Z},1675:function(e,t,r){r.r(t),r.d(t,{default:function(){return P}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{value:!0,"max-width":"500",scrollable:""},on:{input:function(t){return e.$emit("input",!1)}}},[r("v-card",[r("v-card-title",{staticClass:"pa-0"},[r("v-toolbar",{attrs:{color:"indigo",dark:"",dense:""}},[r("v-toolbar-title",[r("WebsiteIcon",{attrs:{bookmark:e.bookmark,size:"1.2rem"}}),e._v(" "+e._s(e.bookmark.title)+" ")],1),r("v-spacer"),r("v-btn",{attrs:{icon:"",large:"","data-cy":"done"},on:{click:e.done}},[r("v-icon",{attrs:{color:"green lighten-2"}},[e._v(" mdi-check-bold ")])],1),e.bookmark.id?r("v-btn",{attrs:{icon:"",large:"","data-cy":"delete"},on:{click:e.deleteThis}},[r("v-icon",{attrs:{color:"red lighten-2"}},[e._v(" mdi-delete ")])],1):e._e(),e.bookmark.id?r("v-btn",{attrs:{icon:"",large:"","data-cy":"reorder"},on:{click:function(t){return e.$store.commit("switchMode",{mode:"reorder-dialog",data:e.bookmark.index})}}},[r("v-icon",{attrs:{color:"yellow lighten-2"}},[e._v(" mdi-swap-horizontal ")])],1):e._e()],1)],1),r("v-card-text",{staticClass:"pt-4 pb-0"},[r("v-text-field",{attrs:{"prepend-inner-icon":"mdi-bookmark",label:e.$t("bookmark.name"),placeholder:"Example","data-cy":"input-title",outlined:"",dense:""},model:{value:e.bookmark.title,callback:function(t){e.$set(e.bookmark,"title",t)},expression:"bookmark.title"}}),r("v-text-field",{attrs:{"prepend-inner-icon":"mdi-web",label:e.$t("bookmark.url"),placeholder:"https://example.com","data-cy":"input-url",outlined:"",dense:""},model:{value:e.bookmark.url,callback:function(t){e.$set(e.bookmark,"url",t)},expression:"bookmark.url"}}),r("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:e.$t("bookmark.search"),placeholder:"/search?wd={}","data-cy":"input-search",outlined:"",dense:""},model:{value:e.bookmark.search,callback:function(t){e.$set(e.bookmark,"search",t)},expression:"bookmark.search"}}),r("v-text-field",{attrs:{"prepend-inner-icon":"mdi-earth",label:e.$t("bookmark.icon"),placeholder:"/favicon.ico","data-cy":"input-icon",outlined:"",dense:""},model:{value:e.bookmark.icon,callback:function(t){e.$set(e.bookmark,"icon",t)},expression:"bookmark.icon"}})],1),e.config.linkPreviewKey?r("v-card-actions",{staticClass:"pt-0"},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary",disabled:!e.bookmark.url||e.linkPreviewLoading},on:{click:e.linkPreview}},[e._v(" LinkPreview "),e.linkPreviewLoading?r("span",[e._v("...")]):r("span",[e._v("!")])])],1):e._e()],1)],1)},o=[],a=r(7928),i=r.n(a),u=r(7895),s=r(8591),l=r(9361),m={components:{WebsiteIcon:u.Z},data(){return{bookmark:JSON.parse(JSON.stringify(this.$store.state.modeData)),linkPreviewLoading:!1}},computed:{...(0,l.rn)("config",["config"])},methods:{done(){(0,s.Z)("/bookmark",this.bookmark)&&(this.bookmark.id?this.$store.dispatch("db/bookmarks/put",this.bookmark):this.$store.dispatch("db/bookmarks/add",this.bookmark),this.$store.commit("alert",{text:this.$t("message.success"),type:"success"}),this.$emit("input",!1))},deleteThis(){this.$store.dispatch("db/bookmarks/delete",this.bookmark),this.$emit("input",!1)},async linkPreview(){this.linkPreviewLoading=!0;const e=await fetch("https://api.linkpreview.net",{method:"POST",mode:"cors",body:JSON.stringify({key:this.config.linkPreviewKey,q:this.bookmark.url})}),t=await e.json();this.linkPreviewLoading=!1,t.error?this.$store.commit("alert",{text:`${t.error}: ${t.description}`,type:"error"}):(t.title&&(this.bookmark.title=t.title),t.image&&(this.bookmark.icon=i().relate(this.bookmark.url,t.image)))}}},c=m,h=r(6117),f=r(6218),p=r.n(f),d=r(9678),x=r(3554),v=r(4947),b=r(5880),k=r(3605),y=r(4462),g=r(5851),O=r(2866),I=r(5321),w=(0,h.Z)(c,n,o,!1,null,null,null),P=w.exports;p()(w,{VBtn:d.Z,VCard:x.Z,VCardActions:v.h7,VCardText:v.ZB,VCardTitle:v.EB,VDialog:b.Z,VIcon:k.Z,VSpacer:y.Z,VTextField:g.Z,VToolbar:O.Z,VToolbarTitle:I.qW})},3186:function(e){e.exports={ABSOLUTE:"absolute",PATH_RELATIVE:"pathRelative",ROOT_RELATIVE:"rootRelative",SHORTEST:"shortest"}},2667:function(e,t,r){var n=r(3186);function o(e,t){return!e.auth||t.removeAuth||!e.extra.relation.maximumHost&&t.output!==n.ABSOLUTE?"":e.auth+"@"}function a(e,t){return e.hash?e.hash:""}function i(e,t){return e.host.full&&(e.extra.relation.maximumAuth||t.output===n.ABSOLUTE)?e.host.full:""}function u(e,t){var r="",o=e.path.absolute.string,a=e.path.relative.string,i=d(e,t);if(e.extra.relation.maximumHost||t.output===n.ABSOLUTE||t.output===n.ROOT_RELATIVE)r=o;else if(a.length<=o.length&&t.output===n.SHORTEST||t.output===n.PATH_RELATIVE){if(r=a,""===r){var u=p(e,t)&&!!f(e,t);e.extra.relation.maximumPath&&!i?r="./":!e.extra.relation.overridesQuery||i||u||(r="./")}}else r=o;return"/"!==r||i||!t.removeRootTrailingSlash||e.extra.relation.minimumPort&&t.output!==n.ABSOLUTE||(r=""),r}function s(e,t){return e.port&&!e.extra.portIsDefault&&e.extra.relation.maximumHost?":"+e.port:""}function l(e,t){return p(e,t)?f(e,t):""}function m(e,t){return d(e,t)?e.resource:""}function c(e,t){var r="";return(e.extra.relation.maximumHost||t.output===n.ABSOLUTE)&&(e.extra.relation.minimumScheme&&t.schemeRelative&&t.output!==n.ABSOLUTE?r+="//":r+=e.scheme+"://"),r}function h(e,t){var r="";return r+=c(e,t),r+=o(e,t),r+=i(e,t),r+=s(e,t),r+=u(e,t),r+=m(e,t),r+=l(e,t),r+=a(e,t),r}function f(e,t){var r=t.removeEmptyQueries&&e.extra.relation.minimumPort;return e.query.string[r?"stripped":"full"]}function p(e,t){return!e.extra.relation.minimumQuery||t.output===n.ABSOLUTE||t.output===n.ROOT_RELATIVE}function d(e,t){var r=t.removeDirectoryIndexes&&e.extra.resourceIsIndex,o=e.extra.relation.minimumResource&&t.output!==n.ABSOLUTE&&t.output!==n.ROOT_RELATIVE;return!!e.resource&&!o&&!r}e.exports=h},7928:function(e,t,r){var n=r(3186),o=r(2667),a=r(7540),i=r(8377),u=r(1303),s=r(3292);function l(e,t){this.options=a(t,{defaultPorts:{ftp:21,http:80,https:443},directoryIndexes:["index.html"],ignore_www:!1,output:l.SHORTEST,rejectedSchemes:["data","javascript","mailto"],removeAuth:!1,removeDirectoryIndexes:!0,removeEmptyQueries:!1,removeRootTrailingSlash:!0,schemeRelative:!0,site:void 0,slashesDenoteHost:!0}),this.from=u.from(e,this.options,null)}l.prototype.relate=function(e,t,r){if(i.isPlainObject(t)?(r=t,t=e,e=null):t||(t=e,e=null),r=a(r,this.options),e=e||r.site,e=u.from(e,r,this.from),!e||!e.href)throw new Error("from value not defined.");if(e.extra.hrefInfo.minimumPathOnly)throw new Error("from value supplied is not absolute: "+e.href);return t=u.to(t,r),!1===t.valid?t.href:(t=s(e,t,r),t=o(t,r),t)},l.relate=function(e,t,r){return(new l).relate(e,t,r)},i.shallowMerge(l,n),e.exports=l},7540:function(e,t,r){var n=r(8377);function o(e,t){if(n.isPlainObject(e)){var r={};for(var o in t)t.hasOwnProperty(o)&&(void 0!==e[o]?r[o]=a(e[o],t[o]):r[o]=t[o]);return r}return t}function a(e,t){return t instanceof Object&&e instanceof Object?t instanceof Array&&e instanceof Array?t.concat(e):n.shallowMerge(e,t):e}e.exports=o},176:function(e){function t(e,t){if(t.ignore_www){var r=e.host.full;if(r){var n=r;0===r.indexOf("www.")&&(n=r.substr(4)),e.host.stripped=n}}}e.exports=t},9419:function(e){function t(e){var t=!e.scheme&&!e.auth&&!e.host.full&&!e.port,r=t&&!e.path.absolute.string,n=r&&!e.resource,o=n&&!e.query.string.full.length,a=o&&!e.hash;e.extra.hrefInfo.minimumPathOnly=t,e.extra.hrefInfo.minimumResourceOnly=r,e.extra.hrefInfo.minimumQueryOnly=n,e.extra.hrefInfo.minimumHashOnly=o,e.extra.hrefInfo.empty=a}e.exports=t},1303:function(e,t,r){var n=r(9419),o=r(176),a=r(173),i=r(7648),u=r(8074),s=r(5209),l=r(5760);function m(e,t,r){if(e){var n=c(e,t),o=l.resolveDotSegments(n.path.absolute.array);return n.path.absolute.array=o,n.path.absolute.string="/"+l.join(o),n}return r}function c(e,t){var r=s(e,t);return!1===r.valid||(o(r,t),i(r,t),a(r,t),u(r,t),n(r)),r}e.exports={from:m,to:c}},173:function(e){function t(e,t){var r=!1;return t.directoryIndexes.every((function(t){return t!==e||(r=!0,!1)})),r}function r(e,r){var o=e.path.absolute.string;if(o){var a=o.lastIndexOf("/");if(a>-1){if(++a<o.length){var i=o.substr(a);"."!==i&&".."!==i?(e.resource=i,o=o.substr(0,a)):o+="/"}e.path.absolute.string=o,e.path.absolute.array=n(o)}else"."===o||".."===o?(o+="/",e.path.absolute.string=o,e.path.absolute.array=n(o)):(e.resource=o,e.path.absolute.string=null);e.extra.resourceIsIndex=t(e.resource,r)}}function n(e){if("/"!==e){var t=[];return e.split("/").forEach((function(e){""!==e&&t.push(e)})),t}return[]}e.exports=r},7648:function(e){function t(e,t){var r=-1;for(var n in t.defaultPorts)if(n===e.scheme&&t.defaultPorts.hasOwnProperty(n)){r=t.defaultPorts[n];break}r>-1&&(r=r.toString(),null===e.port&&(e.port=r),e.extra.portIsDefault=e.port===r)}e.exports=t},8074:function(e){var t=Object.prototype.hasOwnProperty;function r(e,t){e.query.string.full=n(e.query.object,!1),t.removeEmptyQueries&&(e.query.string.stripped=n(e.query.object,!0))}function n(e,r){var n=0,o="";for(var a in e)if(""!==a&&!0===t.call(e,a)){var i=e[a];""===i&&r||(o+=1===++n?"?":"&",a=encodeURIComponent(a),o+=""!==i?a+"="+encodeURIComponent(i).replace(/%20/g,"+"):a)}return o}e.exports=r},5209:function(e,t,r){var n=r(2155).parse;function o(e){var t=e.protocol;return t&&t.indexOf(":")===t.length-1&&(t=t.substr(0,t.length-1)),e.host={full:e.hostname,stripped:null},e.path={absolute:{array:null,string:e.pathname},relative:{array:null,string:null}},e.query={object:e.query,string:{full:null,stripped:null}},e.extra={hrefInfo:{minimumPathOnly:null,minimumResourceOnly:null,minimumQueryOnly:null,minimumHashOnly:null,empty:null,separatorOnlyQuery:"?"===e.search},portIsDefault:null,relation:{maximumScheme:null,maximumAuth:null,maximumHost:null,maximumPort:null,maximumPath:null,maximumResource:null,maximumQuery:null,maximumHash:null,minimumScheme:null,minimumAuth:null,minimumHost:null,minimumPort:null,minimumPath:null,minimumResource:null,minimumQuery:null,minimumHash:null,overridesQuery:null},resourceIsIndex:null,slashes:e.slashes},e.resource=null,e.scheme=t,delete e.hostname,delete e.pathname,delete e.protocol,delete e.search,delete e.slashes,e}function a(e,t){var r=!0;return t.rejectedSchemes.every((function(t){return r=!(0===e.indexOf(t+":")),r})),r}function i(e,t){return a(e,t)?o(n(e,!0,t.slashesDenoteHost)):{href:e,valid:!1}}e.exports=i},9420:function(e,t,r){var n=r(8348),o=r(8377),a=r(5760);function i(e,t,r){n.upToPath(e,t,r),e.extra.relation.minimumScheme&&(e.scheme=t.scheme),e.extra.relation.minimumAuth&&(e.auth=t.auth),e.extra.relation.minimumHost&&(e.host=o.clone(t.host)),e.extra.relation.minimumPort&&s(e,t),e.extra.relation.minimumScheme&&u(e,t),n.pathOn(e,t,r),e.extra.relation.minimumResource&&l(e,t),e.extra.relation.minimumQuery&&(e.query=o.clone(t.query)),e.extra.relation.minimumHash&&(e.hash=t.hash)}function u(e,t){if(e.extra.relation.maximumHost||!e.extra.hrefInfo.minimumResourceOnly){var r=e.path.absolute.array,n="/";r?(e.extra.hrefInfo.minimumPathOnly&&0!==e.path.absolute.string.indexOf("/")&&(r=t.path.absolute.array.concat(r)),r=a.resolveDotSegments(r),n+=a.join(r)):r=[],e.path.absolute.array=r,e.path.absolute.string=n}else e.path=o.clone(t.path)}function s(e,t){e.port=t.port,e.extra.portIsDefault=t.extra.portIsDefault}function l(e,t){e.resource=t.resource,e.extra.resourceIsIndex=t.extra.resourceIsIndex}e.exports=i},8348:function(e){function t(e,t,r){var n=e.extra.hrefInfo.minimumPathOnly,o=e.scheme===t.scheme||!e.scheme,a=o&&(e.auth===t.auth||r.removeAuth||n),i=r.ignore_www?"stripped":"full",u=a&&(e.host[i]===t.host[i]||n),s=u&&(e.port===t.port||n);e.extra.relation.minimumScheme=o,e.extra.relation.minimumAuth=a,e.extra.relation.minimumHost=u,e.extra.relation.minimumPort=s,e.extra.relation.maximumScheme=!o||o&&!a,e.extra.relation.maximumAuth=!o||o&&!u,e.extra.relation.maximumHost=!o||o&&!s}function r(e,t,r){var n=e.extra.hrefInfo.minimumQueryOnly,o=e.extra.hrefInfo.minimumHashOnly,a=e.extra.hrefInfo.empty,i=e.extra.relation.minimumPort,u=e.extra.relation.minimumScheme,s=i&&e.path.absolute.string===t.path.absolute.string,l=e.resource===t.resource||!e.resource&&t.extra.resourceIsIndex||r.removeDirectoryIndexes&&e.extra.resourceIsIndex&&!t.resource,m=s&&(l||n||o||a),c=r.removeEmptyQueries?"stripped":"full",h=e.query.string[c],f=t.query.string[c],p=m&&!!h&&h===f||(o||a)&&!e.extra.hrefInfo.separatorOnlyQuery,d=p&&e.hash===t.hash;e.extra.relation.minimumPath=s,e.extra.relation.minimumResource=m,e.extra.relation.minimumQuery=p,e.extra.relation.minimumHash=d,e.extra.relation.maximumPort=!u||u&&!s,e.extra.relation.maximumPath=!u||u&&!m,e.extra.relation.maximumResource=!u||u&&!p,e.extra.relation.maximumQuery=!u||u&&!d,e.extra.relation.maximumHash=!u||u&&!d,e.extra.relation.overridesQuery=s&&e.extra.relation.maximumResource&&!p&&!!f}e.exports={pathOn:r,upToPath:t}},3292:function(e,t,r){var n=r(9420),o=r(188);function a(e,t,r){return n(t,e,r),o(t,e,r),t}e.exports=a},188:function(e,t,r){var n=r(5760);function o(e,t){var r=[],n=!0,o=-1;return t.forEach((function(t,a){n&&(e[a]!==t?n=!1:o=a),n||r.push("..")})),e.forEach((function(e,t){t>o&&r.push(e)})),r}function a(e,t,r){if(e.extra.relation.minimumScheme){var a=o(e.path.absolute.array,t.path.absolute.array);e.path.relative.array=a,e.path.relative.string=n.join(a)}}e.exports=a},8377:function(e){function t(e){if(e instanceof Object){var r=e instanceof Array?[]:{};for(var n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}return e}function r(e){return!!e&&"object"===typeof e&&e.constructor===Object}function n(e,t){if(e instanceof Object&&t instanceof Object)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}e.exports={clone:t,isPlainObject:r,shallowMerge:n}},5760:function(e){function t(e){return e.length>0?e.join("/")+"/":""}function r(e){var t=[];return e.forEach((function(e){".."!==e?"."!==e&&t.push(e):t.length>0&&t.splice(t.length-1,1)})),t}e.exports={join:t,resolveDotSegments:r}}}]);
//# sourceMappingURL=edit.1d6f27d6.js.map